pub fn run() {
    // main çº¿ç¨‹çš„æ ˆå¤§å°æ˜¯ 8MBï¼Œæ™®é€šçº¿ç¨‹æ˜¯ 2MB
    /*
    * å°å‹æ•°æ®ï¼Œåœ¨æ ˆä¸Šçš„åˆ†é…æ€§èƒ½å’Œè¯»å–æ€§èƒ½éƒ½è¦æ¯”å †ä¸Šé«˜
    ä¸­å‹æ•°æ®ï¼Œæ ˆä¸Šåˆ†é…æ€§èƒ½é«˜ï¼Œä½†æ˜¯è¯»å–æ€§èƒ½å’Œå †ä¸Šå¹¶æ— åŒºåˆ«ï¼Œå› ä¸ºæ— æ³•åˆ©ç”¨å¯„å­˜å™¨æˆ– CPU é«˜é€Ÿç¼“å­˜ï¼Œæœ€ç»ˆè¿˜æ˜¯è¦ç»è¿‡ä¸€æ¬¡å†…å­˜å¯»å€
    å¤§å‹æ•°æ®ï¼Œåªå»ºè®®åœ¨å †ä¸Šåˆ†é…å’Œä½¿ç”¨
    */

    // æ ‡é‡ç±»å‹
    // æ ‡é‡ï¼ˆscalarï¼‰ç±»å‹è¡¨ç¤ºå•ä¸ªå€¼ã€‚Rust æœ‰ 4 ä¸ªåŸºæœ¬çš„æ ‡é‡ç±»å‹ï¼šæ•´å‹ã€æµ®ç‚¹å‹ã€å¸ƒå°”å‹å’Œå­—ç¬¦ ã€‚
    // æœ‰ç¬¦å·ç±»å‹å¯å­˜å‚¨çš„æ•°å­—èŒƒå›´æ˜¯ -2^n-1 ~ 2^n-1 -1 å…¶ä¸­ n æ˜¯è¯¥å®šä¹‰å½¢å¼çš„ä½é•¿åº¦ã€‚å› æ­¤ i8 å¯å­˜å‚¨æ•°å­—èŒƒå›´æ˜¯ -(27) ~ 27 - 1ï¼Œå³ -128 ~ 127
    // æ— ç¬¦å·ç±»å‹å¯å­˜å‚¨çš„æ•°å­—èŒƒå›´æ˜¯ 0 ~ 2^n - 1 å…¶ä¸­ n æ˜¯è¯¥å®šä¹‰å½¢å¼çš„ä½é•¿åº¦ã€‚å› æ­¤ u8 å¯å­˜å‚¨æ•°å­—èŒƒå›´æ˜¯ 0 ~ 28 - 1ï¼Œå³ 0 ~ 255
    // isize å’Œ usize ä½æ•°æ˜¯å–å†³äºcpu æ¶æ„ åŠ¨æ€æ”¹å˜ å¦‚æœcpu 32ä½ é‚£ä¹ˆ ä»–ä»¬å°±ä¸º32 å¦‚æœ64ä½ é‚£ä¹ˆä»–ä»¬å°±ä¸º64
    // Rust æ•´å½¢é»˜è®¤ä½¿ç”¨i32
    let _i = 2;
    let a: u8 = 255;
    let b = a.wrapping_add(20);
    println!("{}", b);
    // æµ®ç‚¹ç±»å‹ é»˜è®¤æµ®ç‚¹ç±»å‹f64
    // é¿å…åœ¨æµ®ç‚¹æ•°ä¸Šæµ‹è¯•ç›¸ç­‰æ€§
    // å½“ç»“æœåœ¨æ•°å­¦ä¸Šå¯èƒ½å­˜åœ¨æœªå®šä¹‰æ—¶ï¼Œéœ€è¦æ ¼å¤–å°å¿ƒ
    let guess: u32 = "42".parse().expect("Not a number!");
    println!("guess: {}", guess);
    let x = 2.0; // f64
    let y: f32 = 3.0; // f32

    // å­—ç¬¦ä¸²ç±»å‹
    // '' ç”¨æ¥è¡¨ç¤ºå­—ç¬¦ "" ç”¨æ¥è¡¨ç¤ºå­—ç¬¦ä¸²
    let c = 'z';
    let z = 'â„¤';
    let heart_eyed_cat = 'ğŸ˜»';
    let x = 'ä¸­';
    println!("å­—ç¬¦å¤§å°{}", size_of_val(&x));

    let x = (-42.0_f32).sqrt();
    if x.is_nan() {
        println!("NaN");
    }
    // æ•°å­—è¿ç®—
    // ç¼–è¯‘å™¨è‡ªåŠ¨æ¨å¯¼ é»˜è®¤i32
    let twenty = 20;
    // ç±»å‹æ ‡æ³¨
    let twenty_one: i32 = 21;
    // é€šè¿‡ç±»å‹åç¼€æ¥è¿›è¡Œæ ‡æ³¨
    let twenty_two = 32_i32;
    // åŒç±»å‹å¯ä»¥è¿›è¡Œè¿ç®—
    let addition = twenty + twenty_one + twenty_two;
    // è¾ƒé•¿çš„æ•°å­—å¯ä»¥è¿›è¡Œ_åˆ†å‰²
    let _one_million: i64 = 1_000_000;
    println!(
        "{} + {} + {} = {}",
        twenty, twenty_one, twenty_two, addition
    );
    // æ— ç¬¦å·8ä½æ•´æ•° äºŒè¿›åˆ¶ä¸º 00000010
    let a: u8 = 2;
    let b: u8 = 3;

    // {:08b}: å·¦é«˜å³ä½è¾“å‡ºäºŒè¿›åˆ¶01 ä¸è¶³8ä½åˆ™é«˜ä½è¡¥0
    //
    println!("a value is {:08b}", a);
    println!("b value is {:08b}", b);
    println!("(a & b) value is {:08b}", a & b);
    println!("(a | b) value is {:08b}", a | b);
    println!("(a ^ b) value is {:08b}", a ^ b);
    println!("!b value is {:08b}", !b);
    println!("(a << b) value is {:08b}", a << b);
    println!("(a >> b) value is {:08b}", a >> b);

    let mut a = a;
    a <<= b;
    println!("(a << b) value is {:08b}", a);
    // let a: u8 = 255;
    // let b = a >> 7; // ok
    // let b = a << 7; // ok
    // let b = a >> 8; // overflow
    // let b = a << 8; // overflow
    // ä¸åŒ…å«5
    for i in 1..5 {
        println!("{}", i)
    }
    // åŒ…å«5
    for i in 1..=5 {
        println!("{}", i)
    }

    // å¤åˆç±»å‹
    // å¤åˆç±»å‹ï¼ˆcompound typeï¼‰å¯ä»¥å°†å¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªç±»å‹ã€‚Rust æœ‰ä¸¤ç§åŸºæœ¬çš„å¤åˆç±»å‹ï¼šå…ƒç»„ï¼ˆtupleï¼‰å’Œæ•°ç»„ï¼ˆarrayï¼‰ã€‚
    let tup = (500, 6.4, 1);
    println!("tup0 {}", tup.0);
    // è§£æ„
    let (x, y, z) = tup;

    // === æ•°ç»„ ===
    let arr_a = [String::from("rust"), String::from("java")];
    let arr_b = arr_a; // å‘ç”Ÿ Moveï¼æ‰€æœ‰æƒç§»äº¤ç»™äº† arr_b

    // println!("{:?}", arr_a); // âŒ æŠ¥é”™ï¼šarr_a çš„å€¼å·²ç»è¢«ç§»åŠ¨äº†

    // === å…ƒç»„ ===
    let tup_a = (String::from("hello"), 100);
    let tup_b = tup_a; // å‘ç”Ÿ Moveï¼
    // println!("{:?}", tup_a); // âŒ æŠ¥é”™ï¼štup_a å·²ç»è¢«ç§»åŠ¨
    //
    //  å±€éƒ¨ç§»åŠ¨
    let t = (String::from("A"), String::from("B"));
    // æˆ‘ä»¬åªæŠŠç¬¬ä¸€ä¸ªå­—æ®µçš„æ‰€æœ‰æƒç§»åŠ¨ç»™ a
    let (a, _) = t;

    println!("a is {}", a); // âœ… å¯ä»¥ä½¿ç”¨ a
    // println!("{:?}", t); // âŒ t ä½œä¸ºä¸€ä¸ªæ•´ä½“å·²ç»éƒ¨åˆ†å¤±æ•ˆäº†ï¼Œä¸èƒ½å†ç”¨äº†

    let arr = [String::from("A"), String::from("B")];

    // âŒ ä¸‹é¢è¿™è¡Œä¼šæŠ¥é”™ï¼šcannot move out of index of array
    // let first = arr[0];

    // è§£å†³æ–¹æ¡ˆ 1ï¼šæŠŠæ•´ä¸ªæ•°ç»„çš„æ‰€æœ‰æƒéƒ½æ‹¿èµ°ï¼ˆä½¿ç”¨è¿­ä»£å™¨ï¼‰
    // for s in arr {
    //     println!("{}", s);
    // }

    // è§£å†³æ–¹æ¡ˆ 2ï¼šå¦‚æœä½ åªæƒ³æ‹¿ä¸€ä¸ªï¼Œä¸æƒ³é”€æ¯æ•°ç»„ï¼Œå¿…é¡»ç”¨å¼•ç”¨
    let first_ref = &arr[0];

    // è§£å†³æ–¹æ¡ˆ 3ï¼šå¦‚æœä½ å¿…é¡»æ‹¿èµ°å…¶ä¸­ä¸€ä¸ªçš„æ‰€æœ‰æƒï¼Œå¯ä»¥ç”¨ Option + replace å¤§æ³•
    // (éœ€è¦æŠŠæ•°ç»„å®šä¹‰ä¸º [Option<String>; 2])
    let a: [i32; 5] = [1, 2, 3, 4, 5];
    println!("Array: {:?}", a);
    let a = [3; 5];
    println!("Array: {}", a[2]);
    // è¡¨è¾¾å¼ è¡¨è¾¾å¼ä¸èƒ½åŒ…å«åˆ†å·ã€‚ è¯­å¥ä¸éœ€è¦æœ€åè®¾ç½®åˆ†å·
    // è¡¨è¾¾å¼å¦‚æœä¸è¿”å›ä»»ä½•å€¼ï¼Œä¼šéšå¼åœ°è¿”å›ä¸€ä¸ª ()
    let y = {
        let x = 3;
        x + 1
    };
    // let v = (let x = 3);
    array_type()
}

fn add_with_extra(x: i32, y: i32) -> i32 {
    let x = x + 1; // è¯­å¥
    let y = y + 5; // è¯­å¥
    x + y // è¡¨è¾¾å¼
}

fn array_type() {
    // æ•°ç»„æ˜¯ é•¿åº¦å›ºå®š å…ƒç´ å¿…é¡»ç›¸åŒçš„ç±»å‹ ä¾æ¬¡çº¿å½¢æ’åˆ—
    // æ•°ç»„æ˜¯å­˜å‚¨åœ¨æ ˆä¸Š åŠ¨æ€æ•°ç»„æ˜¯å †ä¸Š
    let a = [1, 2, 3, 4, 5];
    // æ•°ç»„çš„ç±»å‹å£°æ˜ i32 æ˜¯å…ƒç´ ç±»å‹ï¼Œåˆ†å·åé¢çš„æ•°å­— 5 æ˜¯æ•°ç»„é•¿åº¦
    let b: [i32; 5] = [1, 2, 3, 4, 5];
    // ä»£è¡¨æ•°ç»„é‡Œé¢æœ‰5ä¸ªå…ƒç´ ä¸º3çš„æ•°ç»„åˆå§‹åŒ–
    let c = [3; 5];
    println!("{:?}", c);
    // æŠ¥é”™ï¼Œ æ•°ç»„çš„array=[3;5] å†™æ³• åº•å±‚æ˜¯copyè¿›è¡Œå¤åˆ¶çš„è€ŒStringæ²¡æœ‰å®ç°copy
    // let array = [String::from("rust is good!"); 8];
    // å¿«æ·å†™æ³•
    let array: [String; 4] = std::array::from_fn(|_| String::from("rust is good"));

    // æ•°ç»„åˆ‡ç‰‡
    let slice: &[i32] = &a[1..3];
}
